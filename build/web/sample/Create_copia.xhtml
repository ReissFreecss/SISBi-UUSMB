<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    

    <ui:composition template="/template.xhtml">
        <ui:define name="title">
            <h:outputText value="Registro de muestras"></h:outputText> 
            <f:event type="preRenderView" listener="#{plantillaController.verificarSesion()}"></f:event>


        </ui:define>
        <ui:define name="body">

            <style type="text/css">
                .value {
                    font-weight: bold;
                }


                #ReqSeq {
                    display: flex;
                    flex-direction: row;
                    flex-wrap: wrap;
                    justify-content: center;
                    align-items: center;
                }

            </style>
            <p:growl id="growl_success" for="msgSuccess" showDetail="true" life="4000" severity="info"/>
            <p:growl  id="growl" showDetail="true" sticky="true" severity="error,fatal,warn"/>
            <h:form id="form1">
                <p:commandButton icon="ui-icon-arrowreturnthick-1-w" value="Volver" action="#{projectController.redirectSampleList()}">
                    <f:actionListener binding="#{sampleController.resetSelectionSampleTable()}"/>
                </p:commandButton>
            </h:form>

            <h:form id="form">


                 <div align="center">
                <p:outputLabel value="Registro de un conjunto de muestras" style="font-size: 30px; font-style: italic" />
                </div>

                <br /><br />
                <p:outputLabel value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Estimado usuario: En esta sección podrá registrar un conjunto de muestras a través  de una plantilla  excel. " style="font-size:20px; align-content: center  "/> <br/>
                <p:outputLabel value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Siga las siguientes instrucciones:" style="font-size:20px; align-content: center  "/> <br/><br/>
                <p:outputLabel value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.- Descargue la plantilla de nuestro archivo excel desde la liga: " style="font-size:20px; align-content: center  "/> 
                <!-- 
                <p:button target="_blank" href="http://www.uusmb.unam.mx/F02_PG03_Registro_oficial_de_Muestras.xlsx" value="Descargar plantilla" /> 
                <h:outputLink value= "http://www.uusmb.unam.mx/F02_PG03_Registro_oficial_de_Muestras.xlsx" style="color: yellowgreen; font-weight: bold" >RegistroOficialDeMuestras.xlsx</h:outputLink> <br/><br/>         
                -->            
                <p:outputLabel value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/>
                 <h:outputLink value= "https://docs.google.com/spreadsheets/d/1dL_tXNztFnPlw3ccqqK-sZavbOGk44ZW/edit#gid=1202924776" target="_blank" style="color:orange; font-weight: bold" >RegistroOficialDeMuestras.xlsx</h:outputLink> <br/>
                

                <!-- Inicio del menú 
                <p:outputLabel value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-Si lo requiere le dejamos ejemplos del registro de muestras para diferentes casos." style="font-size:20px; align-content: center  "/> <br/>   
                <p:outputLabel value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" /> 
                <h:outputLink value= "http://www.uusmb.unam.mx/RegistroOficialDeMuestras_20220801.xlsx" style="color: aquamarine; " >Ejemplo Sólo Extracción</h:outputLink> 
                <p:outputLabel value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" style="font-size:20px; align-content: center  "/>  
                <h:outputLink value= "http://www.uusmb.unam.mx/RegistroOficialDeMuestras_20220801.xlsx" style="color: aquamarine; " >Ejemplo Sólo Análisis de Calidad</h:outputLink> 
                <p:outputLabel value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" style="font-size:20px; align-content: center  "/> 
                <h:outputLink value= "http://www.uusmb.unam.mx/RegistroOficialDeMuestras_20220801.xlsx" style="color: aquamarine;" >Ejemplo Construcción de bibliotecas</h:outputLink>  
                <p:outputLabel value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" style="font-size:20px; align-content: center  "/> 
                <h:outputLink value= "http://www.uusmb.unam.mx/RegistroOficialDeMuestras_20220801.xlsx" style="color: aquamarine;" >Ejemplo Secuenciación</h:outputLink> <br/> <br/>             
                Fin ejemplos -->

                <h:outputText escape="false" value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;■ Verifique que las celdas NO CONTENGAN FÓRMULAS, deben tener cadenas de TEXTO." /><br/>  
                <h:outputText escape="false" value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;■ Verifique que el archivo a subir tenga la extension .xlsx" /><br/>  
                <h:outputText escape="false" value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;■ Si tiene dudas de como llenar su archivo favor de escribirnos a: uusmb @ibt.unam.mx , tambien le dejamos unos ejemplos en el libro excel dependiendo del servicio que requiera." /><br/>  <br/>  
                <p:outputLabel value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.- Cargue el archivo excel con los datos correspondientes a sus muestras y espere hasta que el sistema haya terminado de cargarlas." style="font-size:20px; align-content: center  "/>  <br/>
                <p:outputLabel value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Si todo va bien, recibirá un mensaje de confirmación en pantalla." style="font-size:20px; align-content: center  "/>  <br/><br/>

                 <h:panelGrid columns="2">
                     <p:outputLabel value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/>  
                <p:fileUpload  fileUploadListener="#{fileController.procesFile}" mode="advanced" dragDropSupport="false" 
                               fileLimit="3" allowTypes="/(\.|\/)(xlsx)$/"  auto="true" update="growl dialogDetailError"
                               label="Seleccionar archivo Excel"  invalidFileMessage="Formato de archivo invalido"
                               cancelLabel="Cancelar" uploadLabel="Subir archivo" onstart="PF('statusDialogUploadFile').show()" oncomplete="statusDialogUploadFile.hide()" style="align-content: center" />  <br/> <br/><br/> 
                 </h:panelGrid> 
                
                <hr size="5px" color="orange" /><br/>                              
                 <div align="center"><p:outputLabel value="Registro de muestra individual " style="font-size: 30px; font-style: italic" /><br/><br/></div>
                
                <p:outputLabel value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Estimado usuario: Con el siguiente formulario " style="font-size:20px; align-content: center  "/> 
                <p:outputLabel value="'DATOS GENERALES  DE UNA MUESTRA' " style="color: white; font-weight: bold; font-size: 25px"/> 
                <p:outputLabel value="podrá registrar muestras por separado" style="font-size:20px; align-content: center  "/>   <br/><br/>


                <br/>
                

               <!-- <p:panelGrid columns="2"  id="secuenciacion" layout="grid" columnClasses="align-center">-->
                     <p:panelGrid columns="3" layout="grid" id="general_data">

                    <f:facet name="header">
                        Datos Generales de una muestra.
                    </f:facet>
                            <h:panelGrid columns="1"> 
                            <h:outputText  value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" /><br/> 
                            <p:commandButton  value="Limpiar datos"  action="#{sampleController.cleanFormSample()}">                  
                             </p:commandButton>
                            </h:panelGrid>
                     <h:panelGrid columns="1"> <!-- inicio datos generales-->
                           <f:facet name="header">
                        Información general 
                    </f:facet>
                    <p:outputLabel value="¿Tipo de material genético?" for="typemat" title="" />
                    <p:selectOneRadio id="typemat" value="#{sampleController.type}" required="true" >
                    <f:selectItem itemLabel="DNA" itemValue="DNA" />
                    <f:selectItem itemLabel="RNA" itemValue="RNA" />   
                    <p:ajax  event="valueChange" update="general_data,preguntas,libsyseq" listener="#{sampleController.asignarValorCampos()}"/>
                    </p:selectOneRadio>
                                     
                        
                    <h:panelGrid columns="2" id="data"  >
                        
                    <p:outputLabel value="Nombre de la muestra:" for="namesamplee" />
                    <p:inputText id="namesamplee" value="#{sampleController.samName}" a:placeholder="Ejemplo: Coleoptero_Dieta_1TX"  title="No debe contener carácteres especiales como: ´+*.¨@{., ni guiones medios o espacio" required="true" 
                                         requiredMessage="Proporcione un nombre a la muestra" >
                    <p:keyFilter regEx="/[a-z0-9_]/i"/>
                    <p:ajax  event="blur" listener="#{sampleController.asignarValorCampos}"/>
                    </p:inputText>
                    

                    
                    <p:outputLabel value="Etiqueta del tubo de la muestra:" for="tube_id" />
                    <p:inputText required="true" requiredMessage="Proporcione nombre del tubo" id="tube_id" value="#{sampleController.tube}" a:placeholder="Ejemplo: TX_1" title="Identifcador del tubo ephendor donde se entrega la muestra. Debe iniciar con una letra,no debe contener carácteres especiales como: ´+*.¨@{., ni guiones medios o espacios" >
                    <p:keyFilter regEx="/[a-z0-9_]/i"/> 
                    <p:ajax  event="blur" listener="#{sampleController.asignarValorCampos}"/>
                    </p:inputText>
                            
                    <p:outputLabel value="Descripción de la muestra:" for="des_sam" />
                    <p:inputTextarea   id="des_sam" required="#{sampleController.requireInput}" requiredMessage="Proporcione una descripción" value="#{sampleController.des}" a:placeholder="Ejemplo: Intestino de insecto" title="Esta es una descripción libre, que puede ser util, para los análisis bioinformáticos posteriores, por ejemplo  Descripción de la muestra, tejido, tratamiento, wt, condición experimental, etc. " >
                    <p:ajax delay="800" event="keyup" listener="#{sampleController.asignarValorCampos}"/>
                    </p:inputTextarea>
                            
                    <p:outputLabel value= "Medio de entrega:" for="delivery_met"   />
                    <p:selectOneMenu id="delivery_met" value="#{sampleController.delivery}" required="true" >
                    <f:selectItem itemLabel="---" itemValue=""/>
                    <f:selectItem itemLabel="Hielo seco" itemValue="Hielo seco"/>
                    <f:selectItem itemLabel="Hielo" itemValue="Hielo"/>
                    <f:selectItem itemLabel="Temperatura ambiente" itemValue="Temperatura ambiente"/>
                    <p:ajax event="valueChange" update="tor,preguntas,libsyseq"  listener="#{sampleController.asignarValorCampos}" immediate="true" />
                    </p:selectOneMenu>
                    <br/>
                    </h:panelGrid>
                    
                    <h:panelGrid columns="1" id="tor" > <!-- rendered="{sampleController.delivery.equals('Hielo seco')||sampleController.delivery.equals('Hielo')|| sampleController.delivery.equals('Temperatura ambiente') }"-->  
                    <p:outputLabel value="¿Tipo de organismo?" for="typeorg" title="" />
                    <p:selectOneRadio id="typeorg" value="#{sampleController.organimstype}" required="true">
                    <f:selectItem itemLabel="Eucarionte" itemValue="Eucarionte" itemDescription="Plantas,animales,hongos y protozoos"/>
                    <f:selectItem itemLabel="Procarionte" itemValue="Procarionte" itemDescription="Bacterias,archea y  algunas algas azulverdosas"/>
                    <f:selectItem itemLabel="Virus" itemValue="Virus" />
                     <p:ajax  event="valueChange" update="general_preguntas,preguntas,libsyseq" listener="#{sampleController.asignarValorCampos()}"/>
                    </p:selectOneRadio><br/>
                    
           
                    <p:outputLabel value="Organismo Fuente:
                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" for="fuente_org" />
                    <p:autoComplete id="fuente_org" inputStyle="width: 600px" value="#{sampleController.orgName}" title="Organismo de origen de la muestra (nombre, de preferencia como aparece en https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi  o  el Accesion Number Id de NCBI, cuando existe).  Este dato es util solo cuando se solicita un análisis bioinformático posterior." 
                                            completeMethod="#{genomeController.getGenomes2}" maxResults="10" placeholder="Buscar">
                    <p:ajax event="itemSelect" update="grid" listener="#{sampleGenomeLinkController.change()}" />
                    <p:ajax  event="itemSelect" listener="#{sampleController.asignarValorCampos}"/>
                    </p:autoComplete>
                            
                    <p:outputLabel value="Organismo más cercano de referencia: " for="ref_org" />
                    <p:autoComplete  id="ref_org"  disabled="#{sampleGenomeLinkController.haveref}" title="Organismo mas cercano a  la muestra, cuando el de origen no se encuentra secuenciado (nombre o Accesion Number ID).  Este dato solo es util, cuando se quiere hacer un ensamblado de novo con genoma de referencia de un organismo cercano.
                                             " inputStyle="width: 600px" value="#{sampleController.refName}" completeMethod="#{genomeController.getGenomes2}" maxResults="10" placeholder="Buscar"  >
                    <p:ajax  event="itemSelect" listener="#{sampleController.asignarValorCampos}"/>
                    </p:autoComplete>
                    </h:panelGrid>
                    
                    <br/><br/>
                      
                     </h:panelGrid><!-- fin datos generales-->
                     
                    <h:panelGrid columns="1"> 
                    <h:outputText  value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" />
                    </h:panelGrid>
                 </p:panelGrid><!-- fin data_general-->
                                                      
                     
                 <p:panelGrid columns="3" layout="grid" id="general_preguntas" >
                         <h:panelGrid columns="1"> 
                            <h:outputText  value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" /><br/>  
                            </h:panelGrid>
                     <h:panelGrid columns="1" id="preguntas" rendered="#{(sampleController.organimstype.equals('Eucarionte')|| sampleController.organimstype.equals('Procarionte')|| sampleController.organimstype.equals('Virus'))}"> <!-- inicio preguntas-->
                          <f:facet name="header">
                       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Descripción del servicio 
                    </f:facet>
                         <h:panelGrid columns="1" rendered="#{sampleController.type.equals('RNA') and sampleController.organimstype.equals('Procarionte')}" >   
                    <p:outputLabel value="¿Requiero depleción ribosomal?" for="re_dep"  />                           
                    <p:selectOneRadio id="re_dep" value="#{sampleController.rdeplesion}"  >
                    <f:selectItem itemLabel="Si" itemValue="Si" />
                        <f:selectItem itemLabel="No" itemValue="No" />
                        <p:ajax  event="valueChange" update="preguntas" listener="#{sampleController.asignarValorCampos()}"/>
                    </p:selectOneRadio>
                     </h:panelGrid> <br/>
                    
                     <h:panelGrid columns="1" id="solo_egen">  
                    <p:outputLabel value="¿Sólo requiero exctracción de material genético?" for="just_ext" title=""  />
                    <p:selectOneRadio id="just_ext" value="#{sampleController.jgenextrac}" required="true" >
                        <f:selectItem itemLabel="Si" itemValue="Si" />
                        <f:selectItem itemLabel="No" itemValue="No" />
                        <p:ajax  event="valueChange" update="preguntas,type_service,data_lab,req_library,libsyseq,anbio" listener="#{sampleController.asignarValorCampos()}"/>
                    </p:selectOneRadio>
                    </h:panelGrid> <br/>
                    
                    <h:panelGrid columns="1" id="solo_quality" rendered="#{sampleController.jgenextrac.equals('No') }">  
                    <p:outputLabel value="¿Sólo requiero análisis de calidad?" for="just_qan" title="" />
                    <p:selectOneRadio id="just_qan" value="#{sampleController.jqanalysis}" required="true">
                        <f:selectItem itemLabel="Si" itemValue="Si" />
                        <f:selectItem itemLabel="No" itemValue="No" />
                        <p:ajax  event="valueChange" update="preguntas,type_service,req_library,libsyseq,anbio" listener="#{sampleController.asignarValorCampos()}"/>
                    </p:selectOneRadio>
                     </h:panelGrid><br/>
                    
                     <h:panelGrid columns="1" id="solo_clib" rendered="#{sampleController.jgenextrac.equals('No')and sampleController.jqanalysis.equals('No')}" > 
                    <p:outputLabel value="¿Sólo requiero construccion de biblioteca?" for="just_library" title="" />
                    <p:selectOneRadio id="just_library" value="#{sampleController.jlib}" required="true">
                        <f:selectItem itemLabel="Si" itemValue="Si" />
                        <f:selectItem itemLabel="No" itemValue="No" />
                        <p:ajax  event="valueChange" update="preguntas,type_service,req_library,libsyseq,anbio" listener="#{sampleController.asignarValorCampos()}"/>
                    </p:selectOneRadio>
                    </h:panelGrid><br/>
                    
                    <h:panelGrid columns="1" id="lib_soloseq" rendered="#{sampleController.jgenextrac.equals('No')and sampleController.jqanalysis.equals('No')and sampleController.jlib.equals('No')}" > 
                    <p:outputLabel value="Tengo biblioteca, sólo requiero secuenciar" for="just_seq" title="" />
                    <p:selectOneRadio id="just_seq" value="#{sampleController.jseq}" required="true">
                        <f:selectItem itemLabel="Si" itemValue="Si" />
                        <f:selectItem itemLabel="No" itemValue="No" />
                        <p:ajax  event="valueChange" update="preguntas,type_service,req_library,libsyseq,anbio" listener="#{sampleController.asignarValorCampos()}"/>
                    </p:selectOneRadio>
                    </h:panelGrid>
                    
                    
                    <h:panelGrid columns="1" id="req_ext" rendered="#{sampleController.jgenextrac.equals('No')and sampleController.jqanalysis.equals('No')and sampleController.jlib.equals('No')and sampleController.jseq.equals('No')}" > 
                    <p:outputLabel value="Requiere extracción de material genético" for="requiero_ext" title="" />
                    <p:selectOneRadio id="requiero_ext" value="#{sampleController.genExtra}" required="true">
                    <f:selectItem itemLabel="Si" itemValue="Si" />
                    <f:selectItem itemLabel="No" itemValue="No" />
                    <p:ajax  event="valueChange" update="preguntas,type_service,data_lab,req_library,libsyseq,anbio" listener="#{sampleController.asignarValorCampos()}"/>
                    </p:selectOneRadio>
                    </h:panelGrid>
                       
                     </h:panelGrid> <!-- fin preguntas-->      
                     <h:panelGrid columns="1"> 
                            <h:outputText  value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" /><br/>  
                            </h:panelGrid>
                                 
                </p:panelGrid><!-- fin data_general-->
                
                
               <p:panelGrid columns="3" layout="grid" id="type_service"   >   <!-- inciio datos laboratorio-->
                   <h:panelGrid columns="1" id="data_lab" > <!-- rendered="{sampleController.jgenextrac.equals('No')and !sampleController.genExtra.equals('Si') }"-->
                            <h:panelGrid columns="2">
                                
                                  <f:facet name="header">
                        Medición
                    </f:facet>
                           <p:outputLabel value="Volumen total de la muestra (μl): " for="sampleVolume" />
                           <p:inputText id="sam_vol" a:placeholder="Ejemplo: 40" required="#{sampleController.requireInput}" requiredMessage="Proporcione volumen" value="#{sampleController.samVolume}" title="Volumen en microlitros" >
                           <p:keyFilter regEx="/[0-9.]/i"/>
                           <!--<p:ajax delay="800" event="keyup" listener="{sampleController.asignarValorCampos}"/>-->
                           </p:inputText>
                           
                           <h:panelGrid columns="1" rendered="#{sampleController.jlib.equals('Si') || sampleController.jseq.equals('Si') || sampleController.genExtra.equals('No')}" >  
                           <p:outputLabel value="Concentración mat.genético (ng/µL):" for="sampleQuan" /> <!-- -->
                           <p:inputText id="sampleQuan" a:placeholder="Ejemplo: 10.6" required="#{sampleController.requireInput}" requiredMessage="Proporcione concentración" value="#{sampleController.samConcen}" title="Para bibliotecas de gDNA requerimos cuando menos 2 μg de material genético de alto peso molecular, en un volumen no mayor a 100 uL de buffer de elución (Elution Buffer, EB). Para RNA, requerimos cuando menos 2 ug de RNA total de la más alta calidad, con un valor deRIN (RNA Integrity Number) de 8 o mayor, en un volumen no mayor a 50 uL de agualibre de RNAsas" >
                               <p:keyFilter regEx="/[0-9.]/i"/>
                               <p:ajax delay="800" event="keyup" listener="#{sampleController.asignarValorCampos}"/>
                               </p:inputText>  
                               

                            <p:outputLabel value="Absorbancia 260/280: " for="Abs280" />
                            <p:inputText id="Abs280" a:placeholder="Ejemplo: 1.91" required="#{sampleController.requireInput}" requiredMessage="Proporcione absorbancia 260/280" value="#{sampleController.abs260_280}" title="" >
                                   <p:ajax delay="800" event="keyup" listener="#{sampleController.asignarValorCampos}"/>
                               </p:inputText>


                               <p:outputLabel value="Absorbancia 260/230: " for="Abs230" />
                               <p:inputText id="Abs230" a:placeholder="Ejemplo: 1.48"  required="#{sampleController.requireInput}" requiredMessage="Proporcione absorbancia 260/230" value="#{sampleController.abs260_230}" title="" >
                                   <p:ajax delay="800" event="keyup" listener="#{sampleController.asignarValorCampos}"/>
                               </p:inputText>
                                </h:panelGrid>
                               <!-- 
                               <p:outputLabel value="Tamaño del genoma (Mb): " for="size_gen" />
                               <p:inputText id="size_gen" a:placeholder="Ejemplo: 11.9364"  required="{sampleController.requireInput}" requiredMessage="Proporcione absorbancia 260/230" value="#{sampleController.selected.abs260_230}" title="" >
                                   <p:ajax delay="800" event="keyup" listener="{sampleController.asignarValorCampos}"/>
                               </p:inputText>-->
                               </h:panelGrid>
                        </h:panelGrid>
                   
                   <h:panelGrid columns="1" id="dna_contaminantes"  >
                              <f:facet name="header">
                        Contaminantes
                    </f:facet>
                                <h:panelGrid columns="2">
                                <p:outputLabel value="¿La muestra tiene un posible DNA contaminante? : " for="tiene_conta" title="Este dato sólo es útil cuando se solicita alguna análisis Bioinformático y se conoce que la muestra contiene un posible contaminanante de DNA.  Por ejemplo, cuando la muestra proviene del estomago de Aedes aegypti es conocido que la muestra continene wolbachia, que debe ser eliminada de los fastq antes de continuar con cualquier análisis."/>
                                <p:selectOneRadio id="tiene_conta" value="#{sampleGenomeLinkController.haveCont}" >
                                <f:selectItem itemLabel="Si" itemValue="true" />
                                <f:selectItem itemLabel="No" itemValue="false" />
                                        <!-- <p:ajax  event="click" update="grid_contaminant"  />-->
                                         <p:ajax  event="click" update="dna_contaminantes"/>
                                </p:selectOneRadio> 
                                </h:panelGrid>


                            <h:panelGrid columns="1" id="grid_contaminant" rendered="#{sampleGenomeLinkController.haveCont}">
                               <p:outputLabel value="Posible DNA contaminante:
                                                   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                   " for="contamin" />
                                <p:autoComplete title="Cuando la pregunta anterior es definida a “si”  se solicita el nombre del organismo de donde proviene la posible contaminación,  continuando con el ejemplo,  se esperaría que aquí se definiera el nombre de:  “Wolbachia endosymbiont of Aedes aegypti”  que es como aparece en el sitio web "  
                                                id="contamin" inputStyle="width: 500px"  value="#{sampleController.selected.contaminantName}" completeMethod="#{genomeController.getGenomes}" maxResults="10" placeholder="Buscar"  />  
                                </h:panelGrid>


                         </h:panelGrid>
                   
                 </p:panelGrid>   <!-- fin  datos laboratorio-->
               
                 <!-- inicio preguntas 2 liby seq-->
                 <p:panelGrid columns="3" layout="grid" id="req_library"  >
                      <h:panelGrid columns="1"> 
                            <h:outputText  value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" /><br/>  
                            </h:panelGrid>
                     
                     
                     <h:panelGrid columns="1" >
                         
                         <f:facet name="header">
                        Servicio de construcción de bibliotecas y/o secuenciación
                    </f:facet>
                         <h:panelGrid columns="1" > 
                              <p:outputLabel value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/>
                             </h:panelGrid>
                         <h:panelGrid columns="1"  > 
                    <p:outputLabel value="Requiere construcción de biblioteca?" for="requiero_lib" title="" />
                    <p:selectOneRadio id="requiero_lib" value="#{sampleController.bulib} " >
                        <f:selectItem itemLabel="Si" itemValue="Si" />
                        <f:selectItem itemLabel="No" itemValue="No"  />
                        <p:ajax  event="valueChange" update="libsyseq,soloseq_data,req_library" listener="#{sampleController.asignarValorCampos()}"/>
                    </p:selectOneRadio>
                    </h:panelGrid>
                           <h:panelGrid columns="1" > 
                              <p:outputLabel value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/>
                             </h:panelGrid>
                   
                         <h:panelGrid columns="1"  > 
                    <p:outputLabel value="Requiere secuenciación?" for="requiero_secu" title="" />
                    <p:selectOneRadio id="requiero_secu" value="#{sampleController.doseq} " >
                        <f:selectItem itemLabel="Si" itemValue="Si" />
                        <f:selectItem itemLabel="No" itemValue="No"  />
                        <p:ajax  event="valueChange" update="libsyseq,soloseq_data" listener="#{sampleController.asignarValorCampos()}"/>
                    </p:selectOneRadio>
                    </h:panelGrid>
                         </h:panelGrid>
                     
                     
                      <h:panelGrid columns="1"> 
                            <h:outputText  value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" /><br/>  
                            </h:panelGrid>
     
              </p:panelGrid>   <!-- fin preguntas 2-->
               
                 <!-- inicio datos librery y seq-->
                 <p:panelGrid columns="3" layout="grid" id="libsyseq" rendered="#{sampleController.jlib.equals('Si') || sampleController.jseq.equals('Si') || sampleController.bulib.equals('Si') || sampleController.doseq.equals('Si') }"  >
                   
                   <h:panelGrid columns="1" id="libseq_general" > <!-- esta seccion es visible cuando  requiere construccion de bibliotecas y/o requiere secuenciacion-->
                       <f:facet name="header">
                        Datos para construcción de bibliotecas y/o secuenciación
                    </f:facet>
                       
                      
                   <h:panelGrid columns="1" id="dna_app" rendered="#{!sampleController.type.equals('RNA')}">
                   <p:outputLabel value= "Tipo de aplicación DNA:" for="app_type"   /> 
                   <p:selectOneMenu id="app_type" value="#{sampleController.apptype}" required="true">                          
                      <f:selectItem itemLabel="---" itemValue=""/>
                      <f:selectItem itemLabel="Genómica" itemValue="Genómica"/>
                      <f:selectItem itemLabel="Metagenómica" itemValue="Metagenómica"/>
                      <f:selectItem itemLabel="Amplicón 16S" itemValue="Amplicón 16S"/>
                      <f:selectItem itemLabel="Amplicón 18S" itemValue="Amplicón 18S"/>
                      <f:selectItem itemLabel="Amplicón ITS" itemValue="Amplicón ITS"/>
                      <f:selectItem itemLabel="Amplicón CO1" itemValue="Amplicón CO1"/>
                      <f:selectItem itemLabel="Amplicón trnL" itemValue="Amplicón trnL"/>
                      <f:selectItem itemLabel="Chipseq" itemValue="Chipseq"/>                  
                      <p:ajax event="valueChange" listener="#{sampleController.asignarValorCampos}" immediate="true" update="type_service"/>
                      </p:selectOneMenu>
                   </h:panelGrid>  
                   
                   
                   <h:panelGrid columns="1" id="rna_app" rendered="#{!sampleController.type.equals('DNA')}">
                   <p:outputLabel value= "Tipo de aplicación RNA:" for="app_type_rna"   />
                   <p:selectOneMenu id="app_type_rna" value="#{sampleController.apptype}" required="true">                          
                      <f:selectItem itemLabel="---" itemValue=""/>
                      <f:selectItem itemLabel="RNAseq" itemValue="RNAseq"/>
                      <f:selectItem itemLabel="RNA viral" itemValue="RNA viral"/>
                      <f:selectItem itemLabel="mRNA" itemValue="mRNA"/>
                      <f:selectItem itemLabel="smallRNA" itemValue="smallRNA"/>
                      <p:ajax event="valueChange" listener="#{sampleController.asignarValorCampos}" immediate="true" update="type_service"/>
                      </p:selectOneMenu>
                   </h:panelGrid> 
                   
                    <h:panelGrid columns="1" id="plataform_seq">
                    <p:outputLabel value= "Plataforma de secuenciación:" for="plata"   />
                    <p:selectOneMenu id="plata" value="#{sampleController.plataform}" required="true">                            
                      <f:selectItem itemLabel="---" itemValue=""/>
                      <f:selectItems value="#{sampleController.allPlataforms}" var="itemPlat" itemLabel="#{itemPlat}" itemValue="#{itemPlat}" />
                      <p:ajax event="valueChange"  listener="#{sampleController.asignarValorCampos}" immediate="true" update="libsyseq,rendi_seq"/>
                      </p:selectOneMenu>
                    </h:panelGrid>
                    
                     <h:panelGrid columns="2">
                         <p:outputLabel value="Tamaño de lectura (illumina):" for="read_size"  rendered="#{!sampleController.plataform.equals('Oxford Nanopore')}"/>
                         <p:selectOneMenu   id="read_size" value="#{sampleController.readSize}" rendered="#{!sampleController.plataform.equals('Oxford Nanopore')}" >
                      <f:selectItem itemLabel="---" itemValue=""/>
                      <f:selectItem itemLabel="1x75" itemValue="1x75"/>
                      <f:selectItem itemLabel="2x75" itemValue="2x75"/>
                      <f:selectItem itemLabel="2x100" itemValue="2x100"/>
                      <f:selectItem itemLabel="2x150" itemValue="2x150"/>
                      <f:selectItem itemLabel="2x250" itemValue="2x250"/>
                      <f:selectItem itemLabel="2x300" itemValue="2x300"/>
                      <p:ajax event="valueChange" listener="#{sampleController.asignarValorCampos}" update=":form:libsyseq"  immediate="true" resetValues="true"/>
                      </p:selectOneMenu>
                      </h:panelGrid>                  
                   </h:panelGrid>
                   
                     <h:panelGrid columns="1" id="soloseq_data" rendered="#{sampleController.jseq.equals('Si')}"> <!-- esta seccion es visible cuando  tengo biblioteca y solo quiero secuenciar -->
                        
                          <f:facet name="header">
                        Datos de bibliotecas preconstruidas
                            </f:facet>
                       
                        
                        <p:outputLabel value="Kit con el que preconstruyo la biblioteca: " for="lib_kit" />
                        <p:inputText requiredMessage="Proporcione nombre del kit" id="lib_kit" value="#{sampleController.kitlib}" a:placeholder="Ejemplo: Nextflex DNA prep" >
                                <p:keyFilter regEx="/[a-z0-9 ]/i"/> 
                                <p:ajax  event="blur" listener="#{sampleController.asignarValorCampos}"/>
                            </p:inputText><br/>
                        
                        
                         <p:outputLabel value="Tags usados en la construcción de la biblioteca: " for="lib_tags" />
                         <p:inputText requiredMessage="Proporcione los tags o barcodes usados en la biblioteca" id="lib_tags" value="#{sampleController.taglib}" a:placeholder="Ejemplo: N701/S504" >
                                <p:keyFilter regEx="/[a-z0-9 ]/i"/> 
                                <p:ajax  event="blur" listener="#{sampleController.asignarValorCampos}"/>
                            </p:inputText>
                        
                        
                   </h:panelGrid>
                   
                   
                   
                   <h:panelGrid columns="1" id="rendi_seq" rendered="#{!sampleController.selected.do_seq.equals('No')}"> <!-- esta seccion es visible cuando  requiere solo secuenciacion y requiere secuenciacion-->
                   
                     <f:facet name="header">
                        Datos para secuenciación
                    </f:facet>
                        
                       <h:panelGrid columns="1" id="seq_illum" rendered="#{sampleController.isIllumina(sampleController.plataform)}" >
                     <p:outputLabel value="Illumina: Rendimiento de secuenciación en número de lecturas pareadas solicitado en la cotización:" for="expected_per" />
                     <h:panelGrid columns="2" >
                         <p:inputText id="expected_per" value="#{sampleController.expPerfo}" a:placeholder="Ejemplo: 10" title="Es la cantidad de secuencias que se desea obtener del proceso de secuenciación.  Para el caso de análisis de expresion diferencial lo deseable son 10 millones por muestra.  En el caso de Ensamblado de Novo, depende del tamaño estimado del organismo. " requiredMessage="La plataforma de la muestra es del tipo Illumina, entonces Illumina rendimiento es obligatorio">
                     <p:keyFilter regEx="/[0-9]/i"/>
                     <p:ajax event="blur" listener="#{sampleController.requireUnidades()}"/>
                     </p:inputText>
                     
                     <p:selectOneMenu   id="cantidad_ren" value="#{sampleController.unidades}" requiredMessage="Proporcione la unidad del rendimiento">
                     <f:selectItem noSelectionOption="false" itemLabel=""/>
                     <f:selectItem itemLabel="mil" itemValue="mil"/>
                     <f:selectItem itemLabel="millones" itemValue="millones"/>
                     <p:ajax event="valueChange" listener="#{sampleController.asignarValorCampos}" immediate="true" />
                     </p:selectOneMenu>
                       </h:panelGrid> 
                       </h:panelGrid>  
                       
                       
                       <h:panelGrid columns="1" id="seq_nanopore" rendered="#{sampleController.isOxford(sampleController.plataform)}" >
                     <p:outputLabel value="Oxford: Rendimiento de secuenciación en pares de bases solicitado en la cotización:" for="expectedOxford_per" />
                       <h:panelGrid columns="2" >
                           <p:inputText id="expectedOxford_per" value="#{sampleController.expPerfoOxford}" a:placeholder="Ejemplo: 150"  title="Es la cantidad de secuencias que se desea obtener del proceso de secuenciación.  Para el caso de análisis de expresion diferencial lo deseable son 10 millones por muestra.  En el caso de Ensamblado de Novo, depende del tamaño estimado del organismo. "  requiredMessage="La plataforma de la muestra es del tipo Oxford, entonces Oxford rendimiento es obligatorio">
                     <p:keyFilter regEx="/[0-9]/i"/>
                     <p:ajax event="blur" listener="#{sampleController.requireUnidades()}"/>
                     </p:inputText>
                     
                     <p:selectOneMenu   id="cantidad_ren_ox" value="#{sampleController.unidades}" requiredMessage="Proporcione la unidad del rendimiento">
                     <f:selectItem noSelectionOption="false" itemLabel=""/>
                     <f:selectItem itemLabel="Kb" itemValue="Kb"/>
                     <f:selectItem itemLabel="Mb" itemValue="Mb"/>
                     <f:selectItem itemLabel="Gb" itemValue="Gb"/>
                     <p:ajax event="valueChange" listener="#{sampleController.asignarValorCampos}" immediate="true" />
                     </p:selectOneMenu>
                           </h:panelGrid>
                                                             
                     <p:outputLabel value="Profundidad nanopore" rendered="#{!sampleController.selected.samplePlataform.endsWith('Oxford Nanopore')}"/>
                     <p:inputText  value="#{sampleController.profundity}" >
                     <p:keyFilter regEx="/[0-9]/i"/>
                     </p:inputText>
                     
                     
                     </h:panelGrid>
      
                   </h:panelGrid>
                   
                   
                </p:panelGrid><!-- fin datos librery y seq-->
                
               
                <p:panelGrid columns="3" layout="grid" id="comme">
                    <h:panelGrid columns="1">
                    <p:outputLabel value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/>
                    </h:panelGrid> 
                    
                    <h:panelGrid columns="2">
                         <f:facet name="header">
                        Sección de comentarios
                    </f:facet>
                     <p:outputLabel value="Comentarios adicionales:" for="commen" />
                     <p:inputTextarea id="commen" value="#{commentsController.comment}"  a:placeholder="Agregue información relevante acerca de la muestra"  title="Cualquier comentario que considere pertinente sobre esta muestra ">
                     <p:ajax  event="blur" listener="#{sampleController.asignarValorCampos}"/>
                     </p:inputTextarea> 
                  </h:panelGrid>   
                    
                   <h:panelGrid columns="1">
                    <p:outputLabel value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/>
                    </h:panelGrid>  
                    
                    
                </p:panelGrid>
               
               <!-- inicio analisis bioinformatico-->
               <p:panelGrid columns="1" layout="grid" id="anbio"  rendered="#{!sampleController.jgenextrac.equals('Si') }"  >                   
                                      
                        <h:panelGrid id="grid_analysis" columns="1"  > 
                        <f:facet name="header">
                        Análisis Bioinformaticos 
                        </f:facet>

                            <h:panelGrid id="gridRender1" columns="1">
                             <p:outputLabel value="¿Requiere análisis bioinformático?:
                                               &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                               &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                               &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" for="radioRender1" title="Existen servicios bioinformáticos que vienen incluidos en el precio de la secuenciación,  como son la limpieza por calidad, adaptador o genoma contaminante  o el alineamiento vs un genoma de referencia.   También Existen servicios bioinformáticos con costos extras, como son Análisis de expresión diferencial, resecuenciación de genomas, variantes Geneticas, metagenomas y ensamblado de novo.  Cuando el usuario elije como respuesta “no”,  los datos se entregan crudos, es decir exactamente como salen del secuenciador en formato fastq.  Si la respuesta es “si”  se llevará a cabo los análisis “palomeados” de la lista." />
                            <p:selectOneRadio id="radioRender1" value="#{sampleGenomeLinkController.haveBioAn}" >
                            <f:selectItem itemLabel="Si" itemValue="true" />
                            <f:selectItem itemLabel="No" itemValue="false" />
                            <p:ajax  event="click" update="grid_analysis" listener="#{bioinformaticAnalysisSampleLinkController.cleanFormSample()}"/>
                            </p:selectOneRadio>
                            </h:panelGrid>


                            <h:panelGrid id="gridBioin1" columns="1" rendered="#{sampleGenomeLinkController.haveBioAn}"> 
                            <p:outputLabel value="Análisis Bioinformáticos con costo adicional" style="font-size: medium; font-style: italic"/>
                            <p:selectManyCheckbox id="gridCheckCost1" value="#{bioinformaticAnalysisSampleLinkController.analysisCost}" layout="responsive" columns="1">
                            <f:selectItems value="#{bioinformaticAnalysisController.bioAnCost}" var="analysis1" itemLabel="#{analysis1.note}" itemValue="#{analysis1}"      />
                            </p:selectManyCheckbox>
                            </h:panelGrid>

                   </h:panelGrid>   
                        
                     
                 
                </p:panelGrid> <!-- fin analisis bioinformatico-->
               
               
               
               
               
               
               

                <p:panelGrid columns="2" layout="grid" id="principal" rendered="false">

                    <h:panelGrid columns="2" id="grid">
                        <p:outputLabel value="Volumen de la muestra (μl): "  />
                        <p:inputText id="sampleVolume" required="#{sampleController.requireInput}" requiredMessage="Proporcione volumen" value="#{sampleController.selected.sampleVolume}" title="Volumen en microlitros" >
                            <p:keyFilter regEx="/[0-9.]/i"/>
                            <p:ajax delay="800" event="keyup" listener="#{sampleController.asignarValorCampos}"/>
                        </p:inputText>
                    </h:panelGrid>
             </p:panelGrid><!-- termina grid principal!-->






                <br />
                <p:commandButton  id="createButton"  value="Guardar Muestra" icon="ui-icon-disk" update="@(form:last), growl, growl_success, :form:principal"  action="#{sampleGenomeLinkController.create}"  styleClass="ui-priority-primary"> 
                    <f:actionListener binding="#{sampleController.create()}"/>
                    <f:actionListener binding="#{bioinformaticAnalysisSampleLinkController.createBioanSamLink()}"/>
                    <f:actionListener binding="#{commentsController.create4Sample()}"/>

                    <f:actionListener binding="#{sampleGenomeLinkController.cleanFormSample()}"/>
                    <f:actionListener binding="#{sampleController.cleanFormSample()}"/>
                </p:commandButton>

                <br />

                <br />


                <br />

                <br />
                <h:outputText escape="false" value="No se han agregado muestras al proyecto" rendered="#{sampleController.items.rowCount == 0}"/>
                <h:panelGroup rendered="#{sampleController.items.rowCount > 0}">



                    <p:dataTable id="tbl" value="#{sampleController.itemsProj}" var="item"  widgetVar="table" emptyMessage="No hay muestras registradas en este proyecto" 
                                 style="border:solid 1px;  border-color: transparent" scrollable="#{sampleController.itemsProj.size()>14}" scrollHeight="350" resizableColumns="false" 
                                 rowKey="#{item.idSample}">
                        <f:facet name="header">
                            <p:outputPanel>
                                <h:outputText value="Búsqueda rápida:" />
                                <p:inputText id="globalFilter" onkeyup="PF('table').filter()" style="width:150px" placeholder="Buscar"/>
                            </p:outputPanel>
                        </f:facet>  
                        <f:facet name="footer">
                            <h:panelGrid columns="1" style="border-color: transparent">
                                Total de muestras: #{sampleController.itemsProj.size()}
                            </h:panelGrid>

                        </f:facet>
                        <p:column  width="200" filterMatchMode="contains" filterBy="#{item.sampleName}" >

                            <f:facet name="header">
                                <p:outputLabel value="Nombre de la muestra"/>
                            </f:facet>
                            <h:outputText value="#{item.sampleName}"/>
                        </p:column>





                        <p:column width="150" filterMatchMode="contains" filterBy="#{item.idTube}" exportable="false">
                            <f:facet name="header">
                                <p:outputLabel value="Etiqueta del tubo" />
                            </f:facet>
                            <h:outputText value="#{item.idTube}"/>
                        </p:column>


                        <p:column width="150" exportable="false">
                            <f:facet name="header">
                                <p:outputLabel value="¿Requiere extración genetica?" />
                            </f:facet>
                            <h:outputText value="#{item.geneticExtraction}"/>
                        </p:column>


                        <p:column width="150" exportable="false">
                            <f:facet name="header">
                                <p:outputLabel value="Cantidad de muestra (ng)"/>
                            </f:facet>
                            <h:outputText value="#{item.sampleQuantity}"/>
                        </p:column>
                        <p:column width="150" exportable="false"> 
                            <f:facet name="header">
                                <p:outputLabel value="Volumen de muestra (μl)"/>
                            </f:facet>
                            <h:outputText value="#{item.sampleVolume}"/>
                        </p:column>

                        <p:column width="150" exportable="false"> 
                            <f:facet name="header">
                                <p:outputLabel value="Absorbancia 260/280"/>
                            </f:facet>
                            <h:outputText value="#{item.abs260_280}"/>
                        </p:column>

                        <p:column width="150" exportable="false"> 
                            <f:facet name="header">
                                <p:outputLabel value="Absorbancia 260/230"/>
                            </f:facet>
                            <h:outputText value="#{item.abs260_230}"/>
                        </p:column>


                        <p:column width="150" exportable="false">
                            <f:facet name="header">

                                <p:outputLabel value="Concentración de muestra UUSMB (ng/μl)"/>
                            </f:facet>
                            <h:outputText value="#{item.labConcen}"/>
                        </p:column>
                        <p:column width="150" exportable="false"> 
                            <f:facet name="header">
                                <p:outputLabel value="Volumen de muestra UUSMB (μl)"/>
                            </f:facet>
                            <h:outputText value="#{item.labVolume}"/>
                        </p:column>



                        <p:column width="150" filterBy="#{item.sampleQuality}" filterMatchMode="equals" headerText="Calidad" exportable="false">
                            <f:facet name="filter">
                                <p:selectOneMenu onchange="PF('table').filter()">
                                    <f:selectItem itemLabel="Todos" itemValue="" />
                                    <f:selectItem itemLabel="Aun no determinada" itemValue="Aun no determinada" />
                                    <f:selectItem itemLabel="Buena/Aceptable" itemValue="Buena/Aceptable" />
                                    <f:selectItem itemLabel="Buena/Poco volumen" itemValue="Buena/Poco volumen" />
                                    <f:selectItem itemLabel="Parcialmente Degradada" itemValue="Parcialmente Degradada" />
                                    <f:selectItem itemLabel="Degradada" itemValue="Degradada" />
                                    <f:selectItem itemLabel="Sin material genético" itemValue="Sin material genético" />
                                </p:selectOneMenu>
                            </f:facet>
                            <h:outputText value="#{item.sampleQuality}"/>
                        </p:column>
                        <p:column width="150" exportable="false">
                            <f:facet name="header">
                                <p:outputLabel value="Descripcion"/>
                            </f:facet>
                            <h:outputText value="#{item.description}"/>
                        </p:column>
                        <p:column width="150" exportable="false">
                            <f:facet name="header">
                                <h:outputLink id="content" value="#">
                                    <h:outputText value="Estatus" style="color: blue; text-decoration: underline" />
                                </h:outputLink>
                                <p:tooltip id="toolTipContent" for="content"  position="bottom">
                                    <p:panelGrid columns="2" >
                                        <f:facet name="header">
                                            <p:outputLabel value="Descripcion de estatus"/>
                                        </f:facet>
                                        <p:outputLabel value="Registrada" style="text-align: center"/>  
                                        <p:outputLabel value="La muestra ha sido registrada en el sistema." />  

                                        <p:outputLabel value="Recibida" style="text-align: center"/>  
                                        <p:outputLabel value="La unidad recibió la muestra." />  

                                        <p:outputLabel value="En análisis de calidad" style="text-align: center"/>  
                                        <h:panelGrid columns="1" style="padding-left: 0px">
                                            <p:outputLabel value="La muestra esta siendo analizada en cuanto a calidad y concentación" />  
                                            <p:outputLabel value="total del material genético." />  
                                        </h:panelGrid>

                                        <p:outputLabel value="En construcción de biblioteca" style="text-align: center"/>  
                                        <p:outputLabel value="La muestra esta siendo procesada para su secuenciación." />  

                                        <p:outputLabel value="Construcción inficiente" style="text-align: center"/>  
                                        <h:panelGrid columns="1" style="padding-left: 0px">
                                            <p:outputLabel value="Hubo problemas con la preparación de la biblioteca." />   
                                            <p:outputLabel value="Para mas información póngase en contacto con la UUSMB." />  
                                        </h:panelGrid>

                                        <p:outputLabel value="En espera de secuenciación" style="text-align: center"/>  
                                        <p:outputLabel value="La muestra esta en fila para ser secuenciada." />  

                                        <p:outputLabel value="Secuenciada" style="text-align: center"/>  
                                        <p:outputLabel value="La muestra ha sido secuenciada y se logró el rendimiento solicitado." />  

                                        <p:outputLabel value="Para resecuenciar" style="text-align: center" /> 
                                        <h:panelGrid columns="1" style="padding-left: 0px">
                                            <p:outputLabel value="La muestra fue secuenciada pero no alcanzó el rendimiento esperado," />  
                                            <p:outputLabel value="por lo que se volverá a secuenciar." />  
                                        </h:panelGrid>
                                        <p:outputLabel value="Rechazada (forsake)" style="text-align: center"/>  
                                        <p:outputLabel value="La muestra fue abandonada por decisión de la unidad o del usuario." />  

                                        <p:outputLabel value="Entregado fastq" style="text-align: center"/>  
                                        <p:outputLabel value="Los archivos fastq fueron entregados al usuario." />  

                                        <p:outputLabel value="En Análisis Bioinformático" style="text-align: center"/>  
                                        <p:outputLabel value="Los datos fastq se encuentran en proceso de analisis." />  

                                        <p:outputLabel value="Análisis Bioinformático Entregado" style="text-align: center"/>  
                                        <p:outputLabel value="El analisis bioinformatico fue entregado con exito." />  

                                    </p:panelGrid>
                                </p:tooltip>
                            </f:facet>
                            <h:outputText value="#{item.status}"/>
                        </p:column>

                        <p:column width="150" exportable="false">
                            <f:facet name="header">
                                <h:outputLink id="content2" value="#">
                                    <h:outputText value="Aceptacion" style="color: blue; text-decoration: underline" />
                                </h:outputLink>
                                <p:tooltip id="toolTipContent2" for="content2"  position="bottom">
                                    <p:panelGrid columns="2" >
                                        <f:facet name="header">
                                            <p:outputLabel value="Descripcion"/>
                                        </f:facet>
                                        <p:outputLabel value="Aceptada" style="text-align: center"/>  
                                        <h:panelGrid columns="1" style="padding-left: 0px">
                                            <p:outputLabel value="La muestra cuenta con una concentración y volumen adecuados" />  
                                            <p:outputLabel value="por lo que se procedera a su secuenciación." />                                       
                                        </h:panelGrid>

                                        <p:outputLabel value="Condicionada" style="text-align: center"/>  
                                        <h:panelGrid columns="1" style="padding-left: 0px">
                                            <p:outputLabel value="Aunque la muestra cuenta con un grado de degradacion o con poco volumen," />  
                                            <p:outputLabel value="el usuario accedió a que se procediera con la secuenciación." />                                       
                                        </h:panelGrid>

                                        <p:outputLabel value="Rechazada" style="text-align: center"/>  
                                        <h:panelGrid columns="1" style="padding-left: 0px">
                                            <p:outputLabel value="La muestra cuenta con un grado de degradación o con poco volumen" />  
                                            <p:outputLabel value="y el usuario no esta de acuerdo con que se lleve a cabo la secuenciación." />                                       
                                        </h:panelGrid>

                                    </p:panelGrid>
                                </p:tooltip>
                            </f:facet>
                            <h:outputText value="#{item.aceptation}"/>
                        </p:column>
                        <p:column width="150" exportable="false">
                            <f:facet name="header">
                                <p:outputLabel value="Tipo de muestra"/>
                            </f:facet>
                            <h:outputText value="#{item.type}"/>
                        </p:column>

                        <p:column width="150" exportable="false">
                            <f:facet name="header">
                                <p:outputLabel value="Plataforma(s) para la(s) biblioteca(s)"/>
                            </f:facet>
                            <h:outputText value="#{item.samplePlataform}"/>
                        </p:column>
                        <p:column width="150" exportable="false">
                            <f:facet name="header">
                                <p:outputLabel value="Medio de entrega"/>
                            </f:facet>
                            <h:outputText value="#{item.delivery}"/>
                        </p:column>

                        <p:column width="150" exportable="false">
                            <f:facet name="header">
                                <p:outputLabel value="Illumina: Rendimiento solicitado en millones de lecturas"/>
                            </f:facet>
                            <h:outputText value="#{item.expectedPerformance}"/>
                        </p:column>

                        <p:column width="150" exportable="false">
                            <f:facet name="header">
                                <p:outputLabel value="Oxford: Rendimiento solicitado en millones de lecturas"/>
                            </f:facet>
                            <h:outputText value="#{item.expectedPerformanceOxford}"/>
                        </p:column>

                        <p:column width="150" exportable="false">
                            <f:facet name="header">
                                <p:outputLabel value="Tamaño de inserto"/>
                            </f:facet>
                            <h:outputText value="#{item.insertSize}"/>
                        </p:column>

                        <p:column width="150" exportable="false">
                            <f:facet name="header">
                                <p:outputLabel value="Tamaño de lectura"/>
                            </f:facet>
                            <h:outputText value="#{item.readSize}"/>
                        </p:column>
                        <p:column width="150" exportable="false">
                            <f:facet name="header">
                                <p:outputLabel value="Organismo fuente"/>
                            </f:facet>
                            <h:outputText value="#{item.organismName}"/>
                        </p:column>
                        <p:column width="150" exportable="false">
                            <f:facet name="header">
                                <p:outputLabel value="Organismo de referencia"/>
                            </f:facet>
                            <h:outputText value="#{item.referenceName}"/>
                        </p:column>
                        <p:column width="150" exportable="false">
                            <f:facet name="header">
                                <p:outputLabel value="Posible contaminante"/>
                            </f:facet>
                            <h:outputText value="#{item.contaminantName}"/>
                        </p:column>


                        <p:column width="150" exportable="false">
                            <f:facet name="header">
                                <p:outputLabel value="Fecha de recepcion"/>
                            </f:facet>
                            <h:outputText value="#{item.receptionDate}">
                                <f:convertDateTime pattern="dd/MM/yyyy" />
                            </h:outputText>

                        </p:column>


                        <p:column width="150" exportable="false">
                            <f:facet name="header">
                                <h:outputText value="&nbsp;"/>
                            </f:facet>
                            <h:outputText value=" "/>
                            <p:commandButton id="dialog" oncomplete="PF('sampleDialog').show()" value="Mas info" update="form" icon="ui-icon-note" >

                                <p:ajax listener="#{genomeSampleController.asignaMuestra(item)}"/>
                            </p:commandButton>
                        </p:column>

                    </p:dataTable>

                    <p:dialog header="Opciones" widgetVar="sampleDialog" modal="true" resizable="false">
                        <p:panelGrid id="detail" columns="2" >
                            <p:dataTable value="#{genomeSampleController.getGnmSmp()}" var="item4" style="border:solid 1px; border-color: transparent" 
                                         reflow="true" emptyMessage="No hay genomas asociados a esta muestra" >

                                <f:facet name="header">
                                    Genomas asociados a la muestra
                                </f:facet>

                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Nombre de usuario"/>
                                    </f:facet>
                                    <h:outputText value="#{item4.genomeName}"/>
                                </p:column>

                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Nombre"/>
                                    </f:facet>
                                    <h:outputText value="#{item4.type}"/>
                                </p:column>
                            </p:dataTable>



                            <p:dataTable value="#{bioinformaticAnalysisController.getBioAn()}" var="item5" style="border:solid 1px;  border-color: transparent"  
                                         reflow="true" emptyMessage="No hay análisis bioinformaticos asociados a esta muestra">

                                <f:facet name="header">
                                    Análisis bioinformáticos solicitados
                                </f:facet>

                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Analisis"/>
                                    </f:facet>
                                    <h:outputText value="#{item5.analysisName}"/>
                                </p:column>
                            </p:dataTable>

                        </p:panelGrid>
                        <p:dataTable   value="#{commentsController.getSamplesItemsL()}" scrollable="true" scrollHeight="250" var="item6"  style="border:solid 1px; border-color: transparent" reflow="true" emptyMessage="No se han hecho comentarios a esta muestra">


                            <f:facet name="header">
                                Comentarios
                            </f:facet>

                            <p:column width="100" >
                                <f:facet name="header">
                                    <h:outputText value="Fecha"/>
                                </f:facet>
                                <h:outputText value="#{item6.commentDate}">
                                    <f:convertDateTime pattern="dd/MMM/yy '-' hh:mm aa" />
                                </h:outputText>
                            </p:column>
                            <p:column width="100">
                                <f:facet name="header">
                                    <h:outputText value="Nombre de usuario"/>
                                </f:facet>
                                <h:outputText value="#{item6.userName}"/>
                            </p:column>

                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="Comentario"/>
                                </f:facet>
                                <h:outputText value="#{item6.comment}"/>
                            </p:column>



                        </p:dataTable>


                    </p:dialog>





                </h:panelGroup>

                <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()"/>
                <p:dialog header="Cargando..." widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false">
                    <div align="center">
                        <p:outputLabel value="Espere un momento :)"></p:outputLabel><br></br><br></br>
                        <p:graphicImage value="../resources/images/load4.gif" width="120" height="120"></p:graphicImage>
                    </div>

                </p:dialog>

                <p:dialog header="Guardando, por favor espere..." widgetVar="statusDialogUploadFile" modal="true" draggable="false" closable="false" resizable="false" >
                    <div align="center">
                        <div align="center">
                            <p:graphicImage value="../resources/images/upload1.gif" width="240" height="240"></p:graphicImage>
                        </div>
                    </div>
                </p:dialog>

                <p:dialog  widgetVar="dlgInfo"  header="AVISO IMPORTANTE"  style=" top: auto"  responsive="true">

                    <h:outputText value="Estimado usuario:" /> <br/><br/>

                    <h:outputText value="Solo se reciben  muestras en la UUSMB  en el siguiente horario:" /><br/>

                    <h:outputText value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lunes     de 10:00 am a 14:00 pm" style="color: black;font-weight: bold; text-align: right"/><br/>
                    
                    <h:outputText value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Martes    de 09:00 am a 14:00 pm" style="color: black;font-weight: bold; text-align: right"/><br/>
                    
                    <h:outputText value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Miércoles de 09:00 am a 12:00 pm" style="color: black;font-weight: bold; text-align: right"/><br/>
                    
                    <h:outputText value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Jueves    de 09:00 am a 14:00 pm" style="color: black;font-weight: bold; text-align: right"/><br/>
                    
                    <h:outputText value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Viernes NO HAY RECEPCIÓN DE MUESTRAS" style="color: black;font-weight: bold; text-align: right"/><br/><br/>
                    
                    <h:outputText value="No se aceptan muestras que no contengan el Id de la muestra con el que se registró en SISBi" style="color: black;font-weight: bold; text-align: right"/><br/>
                    <h:outputText value="Las muestras se reciben en tubos de 1.5 ml" style="color: black;font-weight: bold; text-align: right"/><br/><br/>

                    <p:commandButton value="Aceptar"  onclick="PF('dlgInfo').hide();"/>

                </p:dialog>

                <p:dialog id="dialogDetailError" header="Errores encontrados" closable="false" widgetVar="dialogDetailError" modal="true" style="font-size: large; text-align: center; font-size: 15px" >
                    <h:panelGrid columns="1" >
                        <br></br>
                        <p:outputLabel style="font-size: 15px;" value="#{fileController.messageDialog}"/>
                        <br></br>
                        <p:outputLabel rendered="#{!fileController.messageDialog2.equals('')}" style="font-size: 15px;" value="#{fileController.messageDialog2}"/>
                        <h:inputTextarea rendered="#{!fileController.messageLongDialog.equals('') || !fileController.messageLongDialog == null}" cols="30" rows="10" readonly="true" value="#{fileController.messageLongDialog}" /> 
                        <p:button outcome="#{sampleController.prepareCreate()}" value="Aceptar"/>
                    </h:panelGrid>
                </p:dialog>


            </h:form>

        </ui:define>
    </ui:composition>



</html>
